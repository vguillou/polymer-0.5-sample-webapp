<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../../bower_components/core-item/core-item.html">
<link rel="import" href="../../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../../bower_components/paper-ripple/paper-ripple.html">

<!-- Routing configuration -->
<link rel="import" href="../routes/routes.html">

<!-- Web app pages -->
<link rel="import" href="../app-scaffold/app-scaffold.html">
<link rel="import" href="../page-home/page-home.html">
<link rel="import" href="../page-a/page-a.html">
<link rel="import" href="../page-b/page-b.html">
<link rel="import" href="../page-b-subpage/page-b-subpage.html">
<link rel="import" href="../page-c/page-c.html">
<link rel="import" href="../page-c-subpage/page-c-subpage.html">

<polymer-element name="app-element">
	<template>
		<link rel="stylesheet" href="app-element.css">
		
		<app-scaffold id="layout" narrow="{{narrow}}" fit>
			<div class="menu" vertical layout>
				<img class="menuHeader" src="../../images/logo.svg"></img>
				<more-route-selector>
					<core-menu excludedLocalNames="div" on-core-select="{{menuItemSelectedHandler}}">
					
						<!--<div class="separator">Simple routing</div>-->
						
						<core-item icon="home" label="Home" route="home">
							<a href="{{urlFor('home')}}"><paper-ripple fit></paper-ripple></a>
						</core-item>
						<core-item icon="book" label="Page A" route="page-a">
							<a href="{{urlFor('page-a')}}"><paper-ripple fit></paper-ripple></a>
						</core-item>
						
						<!--<div class="separator">Nested page routing</div>-->
						
						<core-item icon="work" label="Page B" route="page-b">
							<a href="{{urlFor('page-b')}}"><paper-ripple fit></paper-ripple></a>
						</core-item>
						<core-item icon="language" label="Page C" route="page-c">
							<a href="{{urlFor('page-c')}}"><paper-ripple fit></paper-ripple></a>
						</core-item>
					</core-menu>
				</more-route-selector>
			</div>

			<div class="content">
				<more-route-selector selectedParams="{{params}}">
					<core-animated-pages id="pages" transitions="cross-fade" selectedAttribute="test" fit>

						<page-home route="home" narrow="{{narrow}}" on-toggle-panel="{{togglePanel}}" fit></page-home>
						
						<page-a route="page-a" narrow="{{narrow}}" on-toggle-panel="{{togglePanel}}" fit></page-a>
						
						<page-b route="page-b" narrow="{{narrow}}" on-toggle-panel="{{togglePanel}}" fit></page-b>
						
							<page-b-subpage route="page-b-subpage" narrow="{{narrow}}" params="{{params}}" on-go-back="{{goBack}}" fit></page-b-subpage>
						
						<page-c route="page-c" selected="{{selectedUser}}" narrow="{{narrow}}" on-toggle-panel="{{togglePanel}}" fit></page-c>
						
							<page-c-subpage route="page-c-subpage" user="{{selectedUser}}" narrow="{{narrow}}" params="{{params}}" on-go-back="{{goBack}}" fit></page-c-subpage>

					</core-animated-pages>
				</more-route-selector>
			</div>
		</app-scaffold>
	</template>
	
	<script>
		Polymer('app-element', {
			menuItemSelectedHandler: function(e) {
				if (e !== null && e !== undefined && e.detail !== null && e.detail !== undefined && e.detail.isSelected) {
					this.async(function() {
						this.closeDrawer();
					}, null, 100);
				}
			},

			togglePanel: function() {
				this.$.layout.togglePanel();
			},

			closeDrawer: function() {
				this.$.layout.closeDrawer();
			},
			
			goBack: function() {
				window.history.back();
			}
		});
	</script>
</polymer-element>